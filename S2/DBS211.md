# DBS211   Introduction to Database Systems

- [dbs211.ca](http://dbs211.ca/courses/dbs211/)

- A place to store data, that can extract information.

- 98% involve to database.
- [Clint MacDonald](https://www.linkedin.com/in/clintmacdonald/)
  - 1993 Fortune / Waterloo / No.3 / PhD / Soccer / Referee / Pearl / ML
  - 16 May 1972

## Week1

- Database management system
  - see drawio

- Age --> Date af birth

- Date
  - -200 BC == 2255 ago
    - BC
    - DC
  - Century
    - 1901~2000
    - 2001~2100
  - Leap year
    - 365.249
    - Not 365 366

## Week2

- Table name --> All CAPITAL
- Naming
  - [type] is a key word in software
  - Date + Time --> DateTime
  - ID --> xxxID
- Junction / Bridge Table (Convert "many to many" --> "one to many")
  - 把兩個多對多的關係，新增一個 Table，變成兩個一對多的關係在新的 Table
  - There is no difference.

- Database must work yesterday, today and tomorrow
- One team at a time

## 5 rules of Database

1. Every table must have one and only one primary key (unique identifier)
2. No Repeating Data (Same data same table)
3. No Redundant Data (Same data different table)
4. Do not include calculated fields!(Math, String, dates, concatenation)
5. All fields must be atomic (only one value per cell)

## 5 types of keys

1. PRIMARY KEY
2. FOREIGN KEY - child side of the relationship
3. COMPOSITE KEY - which is a primary key made up of more than one
4. Surrogate key (Replacement to a primary key, but is a Primary key) (Do this after this semester)
5. Candidate Key (Potential Primary key, Never exists in finalized database designs)

## 3 types Relationship

- One to Many (Many to One) - 99.9% of relationships
- Many to Many - CANNOT physically exists / exists in theory, not physically
- One to One - rare but useful for efficiency, non redundancy

## 3 types of Tables

- Data table
- Junction/Bridge table -> simulate to many to many relationships.
- Lookup table

## Referential Integrity

- To ensure the consistency and integrity of the data, avoiding orphan record
  - You can not delete a parent record while children exist.
  - You can not have children unless the parent already exist.
    - Foreign keys may be NULL

## NULLS

- A representation of no knowledge, you do not know the answer or even if an answer exists!

## Week3

- SQL is divided into 3 parts
  - DDL - Data Definition Language (Language of Structure)  - Create / Alter
  - DML - Data Manipulation Language (Language of Data)     - CRUD
  - TCL - Transaction Control Language (Transactional)

- DML
  - Has 4 part == CRUD
    - Create - INSERTing new rows of data
    - Read - Reading data or calculating info using SELECT
    - Update - Changing existing data using UPDATE
    - Delete - Deleting data using DELETE

- The Basic SELECT statement
  - They are 7 parts to the SELECT
    - WEB211 5
    - WEB311 2

- In Oracle, there are only 1 required parts of the SQL statement
  1. SELECT
  2. FROM (FROM is optional in other DBMSs)

- There are 3 ways to sort
  - Alphabetical
  - Numeric
  - Chronological

- Order of EXECUTION
  - Don't use alias in `where`
    - Can use in `order`
    - Not run sql code from top to bottom
    - FROM -> WHERE -> SELECT(Last - 1) -> ORDER By(Last)

- No UNDO in Database
  - Only restore from backup

- SQL not case sensitive but string is.
  - 比較的字直接寫大寫或小寫，用 Upper( ) 會每一筆資料都算一次。

- Single quote and double quote
  - ' ' for string <-- Use this
  - " " assign object name <-- Just don't use this
    - If you use once, you need to keep using it.

- Include all column and same order

- Style Guide / Your SQL should be written using the standard coding style:
  - all keywords are to be upper case,
  - all user-defined names are to be lower case, (example: table and field names)
  - there should be a carriage return before each major part of the SQL statements (i.e. before SELECT, FROM, WHERE and ORDER BY)

- dual
  - It is a system mini table.
  - SELECT sysdate FROM dual;

## Week4 JOINS / VIEW

- JOINS - there are two types of joins
- OLD and obsolete ("classic") joins - ANSI-89
  - 基本上不用了。
  - 先全部組合出來，再選要的。
  - 量一大就很慢
- The new hotness (current) - ANSI-92

- ANSI-89
  - FROM a, b
    - where
- ANSI-92
  - FROM a (INNER)JOIN b
    - ON

- JOINT 90% represent relationship (Not 100%)

- JOIN will create a new table
- FULL OUTER JOIN can find orphan data

- The INVERSE join
  - WHERE column_name IS NULL
    - column_name can not use a column that can be null.
    - column_name Use PK is a safe chose / Because PK is a require field.

- VIEWS
  - Create new view is a DDL
  - CREATE OR REPLACE VIEW view_name
  - DROP VIEW view_name

## Week5 Data Definition Language (DDL)

- Constraints (7)
  1. Primary Key
  2. Foreign Key
  3. Required (Nullable)
  4. Unique
  5. Default (If no value was provided)
  6. Check (range of allowed values)
  7. Index (not actually a constraint, but a feature)

- 隨著字元越多，資料庫佔用的記憶體會增加，會依照目前在這個欄位最長的人來決定
  - Table is square
- [date] take 8 byte.
- [phonenumber] use number(11)  5 bytes
- Foreign Key don't have to use same filed name but have to use same datatype.
- Create table order is matter.

- AUTONUMBER
  - "10248": 5 digit Number
  - "13": End with 3 --> Use ten digit
  - Relate in Sequence (Teach in DBS311)

## Week6 Transactions and Security

- All or nothing

- To start a transaction
  1. New Connection
  2. End previous with "Commit"
  3. To run any DDL statement (Careful !!)
  4. Saving the file (Auto commit !!)

- ROLLBACK
  - goes back to the beginning of the current transaction

## Week7 Midterm

- Add a constrain column
  1. ALTER TABLE <name>
    ADD <colname>
  2. Update All rows putting data in
  3. ALTER TABLE <name>
    ADD constrant <constrainName>
    CHeck 

## Week8

- Model
  1. Catwalk
  2. Toys
  3. Small building
  4. Instruction

- Data Modelling Process
  1. Identify Entities
  2. Identify Attributes
  3. Specify Unique Identifiers
  4. Establish Relationships
    - DIRECT
  5. Define Relationship optionality and cardinality
    - 0 / 1 / Many
    - for each 
    - 4 kind
      1. Zero to 1
      2. One and only one
      3. 0 to many
      4. 1 to many
  6. Eliminate Many-to-Many
  --- Till no many to many
  7. Name Relationships
    - Constrain
  8. Normalize the Database
  9. Define Column Types and Sizes


- Object = things

- Technology writting
  - No --> I / We / Our
  - Use --> This team / This company / This project

## Week9

- No space in table name and column name
- Table name
  - Uppercase
  - Singular
  - No spaces
  - No special characters
- Column name
  - Not all caps
  - Singular
- Required filed use bold



### Random

- update Anomalies
- Audience is software
